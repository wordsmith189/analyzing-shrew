[
  {
    "path": "posts/some-numbers/",
    "title": "2 - Some Numbers",
    "description": "Descriptive statistics about the text's dimensions by genre, speaker, and act.",
    "author": [
      {
        "name": "Lars Hinrichs",
        "url": "https://larshinrichs.site"
      }
    ],
    "date": "2020-10-18",
    "categories": [],
    "contents": "\n\nContents\nDescriptive statistics\nResearch questions\n\nDescriptive statistics\nEverything we’ve done to the text so far, including the hand coding, is called text mining. By conducting some counts and visualizations here of the distributions in our variables of interest, we are moving into what data scientists call descriptive statistics. (And the next level of statistical complexity would be called predictive statistics, or modeling, or machine learning, or AI.)\n\nOur “variables of interest” are, for now: genre, speaker, and act.\nMany digital text analysis projects are best served by careful descriptive statistics, and this is one of them.\n\n\n\nResearch questions\nReceived from Doug Bruster via email.\nHow many words of verse in this play?\nHow many words of prose?\nHow many of each does each character speak?\nWhat is the overall sentiment of the verse speeches?\nWhat is the overall sentiment of the prose speeches?\nIs there a discrepancy in the sentiment of the verse a certain character speaks as opposed to the sentiment of the prose he or she speaks (that is, a wider or narrower gap than the average difference of the two media)?\nAre verse and prose made up of different kinds of words (for example, are the words in one medium longer in terms of character count than the other)?\nAre the lexicons of verse and prose ordered differently? (That is, do the most frequent words differ from one to the other?)\n\n\n\n",
    "preview": "posts/some-numbers/numbers.jpg",
    "last_modified": "2020-10-18T12:21:13-04:00",
    "input_file": {}
  },
  {
    "path": "posts/dataprep/",
    "title": "1 - Data Preparation",
    "description": "Preparation of the pre-cleaned and speaker/genre-tagged play text.",
    "author": [
      {
        "name": "Lars Hinrichs",
        "url": "https://larshinrichs.site"
      }
    ],
    "date": "2020-10-17",
    "categories": [],
    "contents": "\n\nContents\nThe data: gold-standard preparationLoading the file into R\nCurrent size\n\nFurther processingChange genre tags to lexical tags\nEdit speech prefixes\nTokenize\nMark each row for current speaker\nMark each row for current genre\nMark each row for current act\n\n\n\n\n\nThe data: gold-standard preparation\nWe have pre-cleaned the data and hand-coded it for genre. That is the gold standard. In addition, speech prefixes were retained and systematically set to all-caps. Stage directions were removed. Below is a screenshot of the current version.\n\n\n\nFigure 1: Current version of the text: pre-cleaned and hand-tagged for genre.\n\n\n\nLoading the file into R\nReading in the file, the head looks as below.\n\n\nTable 1: The text as initial R object.\n\n\nlinenumber\n\n\ntext\n\n\n1\n\n\n<SLY><prose>I’ll pheeze you, in faith.<\/prose>\n\n\n2\n\n\n<HOSTESS> <prose>A pair of stocks, you rogue! <\/prose>\n\n\n3\n\n\n<SLY> <prose>Y’ are a baggage, the Slys are no rogues.\n\n\n4\n\n\nLook in the chronicles; we came in with Richard\n\n\n5\n\n\nConqueror.  Therefore paucas pallabris, let the world\n\n\n6\n\n\nslide.  Sessa! <\/prose>\n\n\n7\n\n\n<HOSTESS> <prose>You will not pay for the glasses you have\n\n\n8\n\n\nburst? <\/prose>\n\n\n9\n\n\n<SLY> <prose>No, not a denier. Go by, Saint Jeronimy! go\n\n\n10\n\n\nto thy cold bed, and warm thee. <\/prose>\n\n\nCurrent size\nThe text has been read line-by-line. The current length is 2 806 lines. As we process it, we’ll find out the number of words.\nFurther processing\nThe following things need to happen before any analysis.\nWe’ll want to convert the text to one-word-per-row format. This step typically (a) removes all punctuation and (b) changes upper-case to lower-case letters. We don’t really want either of these, but getting rid of punctution is darn useful. So we will want punctuation removed, but we need to do something to retain the valuable genre-tagging. To address a), then, I’ll change our XML format tags (e.g. <prose>...<\/prose>) to lexical tags, i.e. made-up words I can be sure Shakespeare didn’t use in the play: prosestart ... proseend, versestart ... verseend. This will allow me to still remove any punctuation while retaining the genre tagging.\n\nWhy not? Because are relying on capitalization to identify speech prefixes, and on punctuation to identify genre tagging.\nEdit those speech prefixes that, like the huntsmen, consist of more than one token.\nAt this point, “tokenize”, i.e. change format to one-word-per-row.\nIdentify all words in all-caps spelling – we know these are the speech prefixes. Use them to mark each row for the current speaker.\nIdentify all genre tags. Use them to mark each row for prose or verse as genre.\nFind all instances of act or actus and use them to identify boundaries between acts. Add a column that states the act for each unit of text.\nI’ll now work down this list and show the state of the text after each conversion.\nChange genre tags to lexical tags\nEdit speech prefixes\nTokenize\nMark each row for current speaker\nMark each row for current genre\nMark each row for current act\n\n\n\n",
    "preview": "posts/dataprep/shrew_markup.png",
    "last_modified": "2020-10-18T12:19:13-04:00",
    "input_file": {}
  },
  {
    "path": "posts/introduction/",
    "title": "0 - A Look at the Toolbox",
    "description": "Some background on methods and possibilities of digital text analysis, specifically in studying plays.",
    "author": [
      {
        "name": "Lars Hinrichs",
        "url": "https://larshinrichs.site"
      }
    ],
    "date": "2020-10-14",
    "categories": [],
    "contents": "\n\n\n\n\n\n\nWhat is digital text analysis?\nHaving read the NYT piece about social media text analysis, and perhaps from your own life in this digital world of ours!!, you have at least heard about some of the methods that a “computational sociolinguist” or a “digital humanist” might apply to text.\nSentiment analysis\n“Positive” versus “negative” words\nSentiment analysis: n pos v. n neg per text.Sentiment analysis: comparing pos:neg ratios.Sentiment analysis: split each text into 100 slices, then track sentiment curve.Sentiment analysis: same as above, but with act boundaries marked.Tag for more than 2 emotions\nSentiment analysis: pos, neg, and 8 other sentiment categories.Tag for parts of speech\n\n\nknitr::include_graphics(\"pos_tagset.png\", dpi=100)\n\n\nTag for semantic classes\n\n\nknitr::include_graphics(\"semantic_tagset.png\", dpi=100)\n\n\nStart by loading our data\nFirst we’ll get an inventory of all the .DOCX files in our project directory.\n\n\n(textfiles <- list.files(pattern = \".docx\"))\n\n[1] \"prose and verse csv 500 words.docx\"\n[2] \"Prose and Verse from Shrew.docx\"   \n\nThe second file has more formatting and may, for the time being, be more useful. We’ll read it in. Here is the top of its content.\n\n\nf <- read_docx(textfiles[2])\nf %>% head(10)\n\n [1] \"I am  Christophero  Sly; call not me ' honour ' nor 'lordship.' I\"\n [2] \"ne'er drank sack in my life; and if you give me any conserves,\"   \n [3] \"give me conserves of beef. Ne'er ask me what raiment I'll wear,\"  \n [4] \"for I have no more doublets than backs, no more stockings than\"   \n [5] \"legs, nor no more shoes than feet- nay, sometime more feet than\"  \n [6] \"shoes, or such shoes as my toes look through the  overleather .\"  \n [7] \"Lord. Heaven cease this idle  humour  in your  honour !\"          \n [8] \"What, would you make me mad? Am not I Christopher Sly, old\"       \n [9] \"Sly's  son of Burton Heath; by birth a  pedlar , by education a\"  \n[10] \"cardmaker , by transmutation a bear-herd, and now by present\"     \n\nHere it is, converted to tabular format.\n\n\n\nf <- \n  f %>% \n  enframe() %>% \n  select(line = 2) %>% \n  mutate(file = textfiles[2])\nf %>% \n  head(10) %>% \n  kbl() %>% \n  kable_styling(bootstrap_options = \"striped\", \n                full_width = F, \n                position = \"left\") \n\nline\n\n\nfile\n\n\nI am Christophero Sly; call not me ’ honour ’ nor ‘lordship.’ I\n\n\nProse and Verse from Shrew.docx\n\n\nne’er drank sack in my life; and if you give me any conserves,\n\n\nProse and Verse from Shrew.docx\n\n\ngive me conserves of beef. Ne’er ask me what raiment I’ll wear,\n\n\nProse and Verse from Shrew.docx\n\n\nfor I have no more doublets than backs, no more stockings than\n\n\nProse and Verse from Shrew.docx\n\n\nlegs, nor no more shoes than feet- nay, sometime more feet than\n\n\nProse and Verse from Shrew.docx\n\n\nshoes, or such shoes as my toes look through the overleather .\n\n\nProse and Verse from Shrew.docx\n\n\nLord. Heaven cease this idle humour in your honour !\n\n\nProse and Verse from Shrew.docx\n\n\nWhat, would you make me mad? Am not I Christopher Sly, old\n\n\nProse and Verse from Shrew.docx\n\n\nSly’s son of Burton Heath; by birth a pedlar , by education a\n\n\nProse and Verse from Shrew.docx\n\n\ncardmaker , by transmutation a bear-herd, and now by present\n\n\nProse and Verse from Shrew.docx\n\n\nNarrowing down our interest\nI have just received the latest notes from class: the interest seems to be in the difference between verse and prose crossed with an interest in character. I interpret this to mean that there are characters that appear both in verse and in prose sections, and we want to know how the language associated with each character differs from verse to prose.\nIn the text samples I have, character speech is not marked. We might be better off if we pull Taming of the Shrew from www.gutenberg.org.\nLuckily there is an R module that interfaces with the Gutenberg archives. It is called gutenbergr. I will pull the whole text from there.\n\n\n\nshakespeare <- \n  gutenberg_works(author == \"Shakespeare, William\") \n\nshakespeare                    %>% \n  mutate(entry = row_number()) %>% \n  select(entry, title)  %>% \n  kbl() %>% \n  kable_styling(bootstrap_options = \"striped\", \n                full_width = F, \n                position = \"left\") \n\nentry\n\n\ntitle\n\n\n1\n\n\nShakespeare’s Sonnets\n\n\n2\n\n\nVenus and Adonis\n\n\n3\n\n\nKing Henry VI, First Part\n\n\n4\n\n\nHistory of King Henry the Sixth, Second Part\n\n\n5\n\n\nThe History of King Henry the Sixth, Third Part\n\n\n6\n\n\nThe Tragedy of King Richard III\n\n\n7\n\n\nThe Comedy of Errors\n\n\n8\n\n\nThe Rape of Lucrece\n\n\n9\n\n\nThe Tragedy of Titus Andronicus\n\n\n10\n\n\nThe Taming of the Shrew\n\n\n11\n\n\nThe Two Gentlemen of Verona\n\n\n12\n\n\nLove’s Labour’s Lost\n\n\n13\n\n\nKing John\n\n\n14\n\n\nThe Tragedy of King Richard the Second\n\n\n15\n\n\nRomeo and Juliet\n\n\n16\n\n\nA Midsummer Night’s Dream\n\n\n17\n\n\nThe Merchant of Venice\n\n\n18\n\n\nKing Henry IV, the First Part\n\n\n19\n\n\nThe Merry Wives of Windsor\n\n\n20\n\n\nKing Henry IV, Second Part\n\n\n21\n\n\nMuch Ado about Nothing\n\n\n22\n\n\nThe Life of King Henry V\n\n\n23\n\n\nJulius Caesar\n\n\n24\n\n\nAs You Like It\n\n\n25\n\n\nHamlet, Prince of Denmark\n\n\n26\n\n\nThe Phoenix and the Turtle\n\n\n27\n\n\nTwelfth Night; Or, What You Will\n\n\n28\n\n\nThe History of Troilus and Cressida\n\n\n29\n\n\nAll’s Well That Ends Well\n\n\n30\n\n\nMeasure for Measure\n\n\n31\n\n\nOthello, the Moor of Venice\n\n\n32\n\n\nThe Tragedy of King Lear\n\n\n33\n\n\nMacbeth\n\n\n34\n\n\nAntony and Cleopatra\n\n\n35\n\n\nThe Tragedy of Coriolanus\n\n\n36\n\n\nThe Life of Timon of Athens\n\n\n37\n\n\nPericles, Prince of Tyre\n\n\n38\n\n\nCymbeline\n\n\n39\n\n\nThe Winter’s Tale\n\n\n40\n\n\nThe Tempest\n\n\n41\n\n\nThe Life of Henry the Eighth\n\n\n42\n\n\nA Lover’s Complaint\n\n\n43\n\n\nThe Passionate Pilgrim\n\n\n44\n\n\nTwelfth Night\n\n\n45\n\n\nRichard II\n\n\n46\n\n\nHenry IV, Part 1\n\n\n47\n\n\nHenry V\n\n\n48\n\n\nHenry VI, Part 1\n\n\n49\n\n\nHenry VI, Part 2\n\n\n50\n\n\nHenry VI, Part 3\n\n\n51\n\n\nRichard III\n\n\n52\n\n\nHenry VIII\n\n\n53\n\n\nCoriolanus\n\n\n54\n\n\nTitus Andronicus\n\n\n55\n\n\nTimon of Athens\n\n\n56\n\n\nHamlet\n\n\n57\n\n\nKing Lear\n\n\n58\n\n\nOthello\n\n\n59\n\n\nShakespeare’s First Folio\n\n\n60\n\n\nThe Tragicall Historie of Hamlet, Prince of Denmarke The First (‘Bad’) Quarto\n\n\n61\n\n\nThe Tragedie of Hamlet, Prince of Denmark A Study with the Text of the Folio of 1623\n\n\n62\n\n\nShakespeare’s play of the Merchant of Venice Arranged for Representation at the Princess’s Theatre, with Historical and Explanatory Notes by Charles Kean, F.S.A.\n\n\n63\n\n\nKing Henry the Fifth Arranged for Representation at the Princess’s Theatre\n\n\n64\n\n\nThe Works of William Shakespeare [Cambridge Edition] [9 vols.] Introduction and Publisher’s Advertising\n\n\n65\n\n\nThe Tempest The Works of William Shakespeare [Cambridge Edition] [9 vols.]\n\n\n66\n\n\nTwo Gentlemen of Verona The Works of William Shakespeare [Cambridge Edition] [9 vols.]\n\n\n67\n\n\nThe Merry Wives of Windsor The Works of William Shakespeare [Cambridge Edition] [9 vols.]\n\n\n68\n\n\nMeasure for Measure The Works of William Shakespeare [Cambridge Edition] [9 vols.]\n\n\n69\n\n\nThe Comedy of Errors The Works of William Shakespeare [Cambridge Edition] [9 vols.]\n\n\n70\n\n\nThe New Hudson Shakespeare: Julius Cæsar\n\n\n71\n\n\nThe Works of William Shakespeare [Cambridge Edition] [Vol. 2]\n\n\n72\n\n\nShakespeare’s Comedy of The Tempest\n\n\n73\n\n\nThe Works of William Shakespeare [Cambridge Edition] [Vol. 7 of 9]\n\n\n74\n\n\nShakespeare’s Tragedy of Romeo and Juliet\n\n\n75\n\n\nThe Works of William Shakespeare [Cambridge Edition] [Vol. 6 of 9 vols.]\n\n\n76\n\n\nThe Works of William Shakespeare [Cambridge Edition] [Vol. 8 of 9 vols.]\n\n\n77\n\n\nThe Works of William Shakespeare [Cambridge Edition] [Vol. 5 of 9] I, II, and III King Henry Sixth; King Richard III; and two other related plays.\n\n\n78\n\n\nThe Works of William Shakespeare - Cambridge Edition (4 of 9) (1863)\n\n\n79\n\n\nThe Works of William Shakespeare - Cambridge Edition (3 of 9) (1863)\n\n\nSo our text is there and available, at index no. 10.\n\n\nIDs <-  shakespeare[c(10),]$gutenberg_id\n\nshakespeare %>% \n  filter(gutenberg_id %in% IDs) %>% \n  select(gutenberg_id, title)\n\n# A tibble: 1 x 2\n  gutenberg_id title                  \n         <int> <chr>                  \n1         1508 The Taming of the Shrew\n\nLet’s download the play and store it in an R object. I will call it plays (plural in case we add more texts or something.)\n\n\nplays <- gutenberg_download(IDs, meta_fields = \"title\")\n\nplays %>% as_tibble()\n\n# A tibble: 4,829 x 3\n   gutenberg_id text                       title                  \n          <int> <chr>                      <chr>                  \n 1         1508 \"THE TAMING OF THE SHREW\"  The Taming of the Shrew\n 2         1508 \"\"                         The Taming of the Shrew\n 3         1508 \"by William Shakespeare\"   The Taming of the Shrew\n 4         1508 \"\"                         The Taming of the Shrew\n 5         1508 \"\"                         The Taming of the Shrew\n 6         1508 \"\"                         The Taming of the Shrew\n 7         1508 \"\"                         The Taming of the Shrew\n 8         1508 \"Dramatis Personae\"        The Taming of the Shrew\n 9         1508 \"\"                         The Taming of the Shrew\n10         1508 \"Persons in the Induction\" The Taming of the Shrew\n# … with 4,819 more rows\n\nI’ll convert the data to one-word-per row now. It’s the format we need for any of these analyses.\n\n\n\nsentiments <- plays %>%\n  #group_by(title) %>%\n  mutate(line = row_number()) %>% \n  unnest_tokens(word, text,\n                to_lower = F) \n\nsentiments %>% \n  slice(150:190) %>% \n  kbl() %>% \n  kable_styling(bootstrap_options = \"striped\", \n                full_width = F, \n                position = \"left\") \n\ngutenberg_id\n\n\ntitle\n\n\nline\n\n\nword\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n68\n\n\nTherefore\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n68\n\n\npaucas\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n69\n\n\npallabris\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n69\n\n\nlet\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n69\n\n\nthe\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n69\n\n\nworld\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n69\n\n\nslide\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n69\n\n\nSessa\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n71\n\n\nHOSTESS\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nYou\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nwill\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nnot\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\npay\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nfor\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nthe\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nglasses\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nyou\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nhave\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n72\n\n\nburst\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n74\n\n\nSLY\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nNo\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nnot\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\na\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\ndenier\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nGo\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nby\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nSaint\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nJeronimy\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\ngo\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nto\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nthy\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\ncold\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n75\n\n\nbed\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n76\n\n\nand\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n76\n\n\nwarm\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n76\n\n\nthee\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n78\n\n\nHOSTESS\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n79\n\n\nI\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n79\n\n\nknow\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n79\n\n\nmy\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n79\n\n\nremedy\n\n\nWith my well-trained eye, I notice that “character names designating who’s speaking” are all set in all-caps. Given this material property, we can insert a column into the data that states, for each word, who is speaking it.\n\nA much nicer technical term is speech prefix.\n\n\nplay_with_speaker <- \n  sentiments %>% \n  mutate(speaker = NA)\n\ntwo_word_name <- FALSE\n\nspeakername <- NA\n\nfor (i in (1:nrow(play_with_speaker))){\n  \n  # define the word that this loop looks at\n  myword = play_with_speaker[i,] %>% \n    pull(word)\n  \n  # check whether word is identitcal to its all-caps conversion\n  # if yes, then set it as speaker name\n  if (myword == toupper(myword) & nchar(myword) > 1){\n    speakername = myword\n  }\n  \n  # write speaker name in speaker column\n  play_with_speaker$speaker[i] = speakername\n  cat(\"\\014\", i, \"of\", nrow(play_with_speaker))\n}\ncat(\"\\014\")\n\nWe’ll export the dataset we’ve created so that next time the chunk won’t need to run. We’ll only need to import the data then.\n\n\nplay_with_speaker %>% \n  export(\"play_with_speaker.csv\")\n\n\n\nplay_with_speaker <- \n  import(\"play_with_speaker.csv\")\n\nLet’s get a printout of the number of words spoken by each character.\n\n\n\nplay_with_speaker %>% \n  count(speaker, sort = T) %>% \n  filter(n > 25) %>% \n  kbl(caption = \"Words per character (showing only those with more than 25)\") %>% \n  kable_styling(position = \"left\",\n                bootstrap_options = \"striped\", \n                full_width = F)\n\nTable 1: Words per character (showing only those with more than 25)\n\n\nspeaker\n\n\nn\n\n\nPETRUCHIO\n\n\n4494\n\n\nTRANIO\n\n\n2423\n\n\nKATHERINA\n\n\n1900\n\n\nHORTENSIO\n\n\n1882\n\n\nLUCENTIO\n\n\n1625\n\n\nGRUMIO\n\n\n1540\n\n\nGREMIO\n\n\n1354\n\n\nBAPTISTA\n\n\n1177\n\n\nBIONDELLO\n\n\n933\n\n\nLORD\n\n\n808\n\n\nBIANCA\n\n\n677\n\n\nSERVANT\n\n\n600\n\n\nSLY\n\n\n598\n\n\nVINCENTIO\n\n\n469\n\n\nPEDANT\n\n\n453\n\n\nPLAYERS\n\n\n214\n\n\nCURTIS\n\n\n199\n\n\nTAILOR\n\n\n139\n\n\nPAGE\n\n\n136\n\n\nSERVANTS\n\n\n112\n\n\nWIDOW\n\n\n112\n\n\nHUNTSMAN\n\n\n110\n\n\nSCENE\n\n\n57\n\n\nPLAYER\n\n\n35\n\n\nHOSTESS\n\n\n34\n\n\nNATHANIEL\n\n\n26\n\n\nFor later use, let’s retain a list of the speakers who have significant enough amounts of speech. Let’s set the cutoff even a bit higher, at 400 words.\n\n\nsig_speakers <- \n  play_with_speaker %>% \n  count(speaker) %>% \n  arrange(desc(n)) %>% \n  filter(n >400) %>% \n  pull(speaker)\nsig_speakers\n\n [1] \"PETRUCHIO\" \"TRANIO\"    \"KATHERINA\" \"HORTENSIO\" \"LUCENTIO\" \n [6] \"GRUMIO\"    \"GREMIO\"    \"BAPTISTA\"  \"BIONDELLO\" \"LORD\"     \n[11] \"BIANCA\"    \"SERVANT\"   \"SLY\"       \"VINCENTIO\" \"PEDANT\"   \n\nBelow is a preview of the data format in which every row shows in the speaker column which character speaks it.\n\n\n\nplay_with_speaker %>% \n  slice(340:400) %>% \n  kbl() %>% \n  kable_styling(position = \"left\",\n                full_width = F)\n\ngutenberg_id\n\n\ntitle\n\n\nline\n\n\nword\n\n\nspeaker\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n108\n\n\nesteem\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n108\n\n\nhim\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n108\n\n\nworth\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n108\n\n\na\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n108\n\n\ndozen\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n108\n\n\nsuch\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nBut\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nsup\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nthem\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nwell\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nand\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nlook\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nunto\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nthem\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n109\n\n\nall\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n110\n\n\nTo\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n110\n\n\nmorrow\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n110\n\n\nI\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n110\n\n\nintend\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n110\n\n\nto\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n110\n\n\nhunt\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n110\n\n\nagain\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n112\n\n\nFIRST\n\n\nFIRST\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n112\n\n\nHUNTSMAN\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n113\n\n\nI\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n113\n\n\nwill\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n113\n\n\nmy\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n113\n\n\nlord\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n115\n\n\nLORD\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n116\n\n\nSees\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n116\n\n\nSly\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n116\n\n\nWhat’s\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n116\n\n\nhere\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n116\n\n\nOne\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n116\n\n\ndead\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n116\n\n\nor\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n116\n\n\ndrunk\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n117\n\n\nSee\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n117\n\n\ndoth\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n117\n\n\nhe\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n117\n\n\nbreathe\n\n\nLORD\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n119\n\n\nSECOND\n\n\nSECOND\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n119\n\n\nHUNTSMAN\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nHe\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nbreathes\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nmy\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nlord\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nWere\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nhe\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nnot\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nwarm’d\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nwith\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n120\n\n\nale\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n121\n\n\nThis\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n121\n\n\nwere\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n121\n\n\na\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n121\n\n\nbed\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n121\n\n\nbut\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n121\n\n\ncold\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n121\n\n\nto\n\n\nHUNTSMAN\n\n\n1508\n\n\nThe Taming of the Shrew\n\n\n121\n\n\nsleep\n\n\nHUNTSMAN\n\n\nTag for sentiment\nFor now, we’ll just tag for pos. and neg. sentiment words\n\n\n\nsentiment <- \n  play_with_speaker %>% \n  mutate(word = tolower(word)) %>% \n  anti_join(stop_words) %>%          \n  inner_join(get_sentiments(\"bing\")) %>% \n  select(speaker, word, sentiment)\n\nsentiment %>% \n  slice(300:330) %>% \n  kbl() %>% \n  kable_styling(position = \"left\",\n                full_width = F)\n\nspeaker\n\n\nword\n\n\nsentiment\n\n\nLUCENTIO\n\n\nsweet\n\n\npositive\n\n\nLUCENTIO\n\n\nbeauty\n\n\npositive\n\n\nLUCENTIO\n\n\nhumble\n\n\npositive\n\n\nTRANIO\n\n\nscold\n\n\nnegative\n\n\nTRANIO\n\n\ndin\n\n\nnegative\n\n\nLUCENTIO\n\n\nsweet\n\n\npositive\n\n\nTRANIO\n\n\nlove\n\n\npositive\n\n\nTRANIO\n\n\nmaster\n\n\npositive\n\n\nTRANIO\n\n\nlove\n\n\npositive\n\n\nLUCENTIO\n\n\ncruel\n\n\nnegative\n\n\nTRANIO\n\n\nmaster\n\n\npositive\n\n\nLUCENTIO\n\n\nmaster\n\n\npositive\n\n\nLUCENTIO\n\n\nmaster\n\n\npositive\n\n\nLUCENTIO\n\n\ncharm\n\n\npositive\n\n\nTRANIO\n\n\npleasure\n\n\npositive\n\n\nTRANIO\n\n\nlove\n\n\npositive\n\n\nLUCENTIO\n\n\nloves\n\n\npositive\n\n\nLUCENTIO\n\n\nslave\n\n\nnegative\n\n\nLUCENTIO\n\n\nrogue\n\n\nnegative\n\n\nBIONDELLO\n\n\nmaster\n\n\npositive\n\n\nLUCENTIO\n\n\nquarrel\n\n\nnegative\n\n\nLUCENTIO\n\n\nfear\n\n\nnegative\n\n\nTRANIO\n\n\nfaith\n\n\npositive\n\n\nTRANIO\n\n\nmaster\n\n\npositive\n\n\nSLY\n\n\nsly\n\n\nnegative\n\n\nSLY\n\n\nsaint\n\n\npositive\n\n\nSLY\n\n\nsly\n\n\nnegative\n\n\nSLY\n\n\nexcellent\n\n\npositive\n\n\nPETRUCHIO\n\n\nbeloved\n\n\npositive\n\n\nPETRUCHIO\n\n\nknock\n\n\nnegative\n\n\nGRUMIO\n\n\nknock\n\n\nnegative\n\n\nWith this data available, we can now plot the sentiment-per-speaker.\nFirst we’ll make a second dataset that is “wider”: it has one row per speaker and it summarizes n_neg, n_pos, n_total, and neg_ratio.\n\n\nsentiment_wide <- \n  sentiment %>% \n  filter(speaker %in% sig_speakers) %>% \n  count(speaker, sentiment) %>% \n  pivot_wider(\n    names_from = sentiment,\n    values_from = n\n  ) %>% \n  mutate(n_total = negative + positive,\n         neg_ratio = negative/positive) %>% \n  rename(n_neg = negative,\n         n_pos = positive)\n\nSome of this info will be useful to have in the main dataset sentiment. Therefore we’ll left_join() the two.\n\n\nsentiment %>% \n  filter(speaker %in% sig_speakers) %>% \n  count(speaker, sentiment) %>% \n  left_join(select(sentiment_wide, speaker, n_total)) %>% \n  #---start plot code---#\n  ggplot(aes(x = sentiment,\n             y = n/n_total,\n             fill = speaker)) +\n  scale_y_continuous(labels = scales::percent_format()) +\n  geom_bar(stat = \"identity\",\n           position = \"dodge\") +\n  scale_fill_viridis_d() +\n  facet_wrap(~speaker) + \n  labs(y=\"sentiment words scored\") +\n  theme_classic(base_family = \"Roboto Condensed\") +\n  theme(legend.position = \"none\")\n\n\nFigure 1: The ratio between neg. and pos.-coded words by character.\n\n\n\nLet’s now plot just one bar for each speaker, the neg:pos ratio (or neg_ratio, as I will call it). So the highest value will be for the character with the most negative words.\n\n\nsentiment_wide %>% \n  #---start plot code---#\n  ggplot(aes(x = reorder(speaker, neg_ratio),\n             y = neg_ratio,\n             fill = -(neg_ratio)\n             )) +\n   geom_hline(yintercept = 1,\n             colour=\"black\", \n             linetype=\"dashed\") +\n  geom_col(alpha=0.8) +\n  scale_fill_viridis_b() +\n  labs(\n    title=\"Sentiment ratio by character\",\n    subtitle=\"Values > 1 indicate greater negative counts\",\n    caption=\"The Taming of the Shrew\",\n    y=\"negative vs. positive words\",\n       x=NULL) +\n  coord_flip() +\n  theme_classic(base_family = \"Roboto Condensed\") +\n  theme(legend.position = \"none\")\n\n\nFigure 2: Sly must be miserable to be around.\n\n\n\n\n\n",
    "preview": "posts/introduction/toolbox.png",
    "last_modified": "2020-10-18T00:25:37-04:00",
    "input_file": {}
  }
]
