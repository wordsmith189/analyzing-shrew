---
title: "2 - Some Numbers"
description: |
  Descriptive statistics about the text's dimensions by genre, speaker, and act.
author:
  - name: "Lars Hinrichs"
    url: https://larshinrichs.site
    affiliation: "The University of Texas at Austin"
    affiliation_url: https://liberalarts.utexas.edu/english
date: 10-18-2020
draft: false
output:
  distill::distill_article:
    self_contained: false
    toc: true
    toc_depth: 4
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      cache = TRUE)
pacman::p_load(rio, tidyverse)
```

## Descriptive statistics

Everything we've done to the text so far, including the hand coding, is called **text mining**. By conducting some counts and visualizations here of the distributions in our variables of interest, we are moving into what data scientists call **descriptive statistics**. (And the next level of statistical complexity would be called predictive statistics, or modeling, or machine learning, or AI.)

<aside>Our "variables of interest" are, for now: **genre**, **speaker**, and **act**.</aside>

Many digital text analysis projects are best served by careful descriptive statistics, and this is one of them.

```{r}
knitr::include_graphics("numbers.jpg")
```


## Research questions

Received from Doug Bruster via email. 

a) How many words of verse in this play?
b) How many words of prose?
c) How many of each does each character speak?
d) What is the overall sentiment of the verse speeches?
e) What is the overall sentiment of the prose speeches?
f) Is there a discrepancy in the sentiment of the verse a certain character speaks as opposed to the sentiment of the prose he or she speaks (that is, a wider or narrower gap than the average difference of the two media)?
g) Are verse and prose made up of different kinds of words (for example, are the words in one medium longer in terms of character count than the other)?
h) Are the lexicons of verse and prose ordered differently? (That is, do the most frequent words differ from one to the other?)

## Text volume by genre, character, act

```{r load data}
text <- import("../dataprep/text_prepped.RDS")
```

### Character

First, let's see which character has how many words.

```{r n words char, fig.cap="Number of words per character."}
text %>% 
  count(speaker) %>% 
  ggplot(aes(x=reorder(speaker, n),
             y=n, 
             fill=n)) +
  geom_col(width = .4) +
  scale_fill_viridis_c() +
  scale_y_continuous(labels=function(x) format(x, 
                                               big.mark = ",")) +
  coord_flip() +
  labs(title = "Words per Character",
       x = NULL,
       y = NULL) +
  theme_classic(base_family = "Arial Narrow") +
  theme(legend.position = "none")
```
### Genre

```{r words gnr, fig.cap="Number of words per character."}
text %>% 
  count(genre) %>% 
  ggplot(aes(x=reorder(genre, n),
             y=n, 
             fill=n)) +
  geom_col(width = .4) +
  scale_fill_viridis_c() +
  scale_y_continuous(labels=function(x) format(x, 
                                               big.mark = ",")) +
  coord_flip() +
  labs(title = "Words per Genre",
       x = NULL,
       y = NULL) +
  theme_classic(base_family = "Arial Narrow") +
  theme(legend.position = "none")
```
### Genre and Character

```{r char by genre, fig.cap="Number of words per character and genre. Showing top 22 speakers.", layout = "l-outset"}
topspeakers <- text %>% 
  count(speaker, sort = T) %>% 
  rename(total = n) %>% 
  slice(1:22)

propdata <- 
  text %>% 
  count(speaker, genre) %>% 
  na.omit() %>% 
  filter(speaker %in% topspeakers$speaker) %>% 
  left_join(topspeakers) %>% 
  mutate(prop = n/total)

selorder <- 
  propdata %>% 
  filter(genre == "verse") %>% 
  arrange(-prop)

propdata %>% 
  ggplot(aes(x=factor(speaker, levels = selorder$speaker),
             y=prop,
             fill=genre)) +
  geom_col(width = .4) +
  scale_fill_viridis_d() +
  scale_y_continuous(labels=scales::percent) +
  coord_flip() +
  labs(title = "Words per Character and Genre",
       caption = "The Taming of the Shrew",
       x = NULL,
       y = NULL) +
  theme_classic(base_family = "Arial Narrow") 
```